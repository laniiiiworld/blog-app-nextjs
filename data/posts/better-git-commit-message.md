좋은 메시지 작성에 정답이 있진 않지만,
협업을 위해 좀 더 많은 사람들이 공감하고 실천하고 있는 약속에 다가가기 위한 노력은 지속적으로 필요하다. 혼자 코딩을 하더라도 상용화를 고민한다면 유지보수를 위해 잘 작성해둔 commit 메세지의 도움을 받을 날이 반드시 온다.

## git commit 메시지를 잘 쓰려고 노력해야 하는 이유

1. commit 로그의 가독성을 높일 수 있다.
2. 더 나은 협업과 리뷰 프로세스 적립이 가능하다.
3. 코드 유지보수가 더 쉬워진다.

## 고민

1. 단순히 오타 수정한 내용, 중요한 기능 추가, 수정한 내용을 효율적으로 구분할 수 없을까?

   commit 로그를 모아두고 확인할 때 가독성을 높일 수 있다.

2. 어떤 단위로 commit되어야 협업할 때 더 보기 편할까?

   협업을 하다 보면 A와 관련하여 고친 부분만 확인하고 싶은데 너무 큰 규모의 commit이거나, 혹은 너무 여러 개의 commit으로 나누어져 확인하기 번거로울 때가 있다.

3. '왜' 작성했는지 잘 드러나게 작성했나?

   B를 수정하기 위해 코드를 보는데 이해되지 않은 부분이 있을 때가 있다. 이때 commit 로그의 내용은 "~을 어떻게 고쳤다"보다는 "~의 이슈로 고쳤다"와 같이 왜 고쳤는지가 더 코드 이해에 도움이 된다.

평소 commit 메세지를 작성할 때마다 이 3가지 부분에 대한 고민을 하게된다.
이 글을 작성한 후에는 좀 더 명확한 메세지를 작성할 수 있길 바라며 시작해보자!

## 좋은 git commit 메시지를 작성하기 위한 7가지 약속

1. 제목과 본문을 한 줄 띄워 분리하기
2. 제목은 영문 기준 50자 이내로
3. 제목 첫글자를 대문자로
4. 제목 끝에 . 금지
5. 제목은 명령조로
6. 본문은 영문 기준 72자마다 줄 바꾸기
7. 본문은 어떻게보다 **무엇을**, **왜**에 맞춰 작성하기

## commit 메세지 작성 TIP

### 규모가 큰 프로젝트 Github에서 commit 메세지 둘러보기

많은 개발자들이 협업중인 규모가 큰 프로젝트의 commit 메세지를 둘러보는 것은 "commit 메세지 제목 작성법", "적절한 commit 단위", "'왜'를 표현하는 commit 작성법" 등의 감을 잡는 데 도움이 된다.

#### 참고하면 좋을 대규모 프로젝트의 GitHub

- [react](https://github.com/facebook/react)
- [next.js](https://github.com/vercel/next.js)
- [TypeScript](https://github.com/microsoft/TypeScript)

### commit 메세지 제목 작성법

"좋은 git 커밋 메시지를 작성하기 위한 7가지 약속" 중 제목과 관련된 내용은 5가지나 된다. 그만큼 잘 작성된 제목이 중요하다.

1. 제목과 본문을 한 줄 띄워 분리하기

   "**_$ git log --oneline_**"옵션을 통해 한 줄로 출력했을 때 가독성이 높아진다.

2. 제목은 영문 기준 50자 이내로

   간결하게 작성한다.

3. 제목 첫글자를 대문자로
4. 제목 끝에 . 금지
5. 제목은 명령조로

   첫 단어를 동사원형으로 작성한다.

   커밋 메시지를 명령문으로 작성한다는 것은, git의 Built-in Convention을 그대로 따른다는 것을 의미한다.

#### 제목 작성 예시

1. [Type: Title]
   - Docs: fix typo in README.md (#이슈번호)
2. [Title]
   - Add feature flags for expiration times (#이슈번호)

#### Type에 작성하기 좋은 영어단어

|Type|사용 용도|
|:--:|:--|
|Feat|새로운 기능 추가에 사용|
|Fix|버그 수정|
|Docs|문서 수정|
|Style|코드 스타일 변경 (코드 포매팅, 세미콜론 누락 등)<br />기능 수정이 없는 경우|
|Design|사용자 UI 디자인 변경 (CSS 등)|
|Test|테스트 코드, 리팩토링 (Test Code)|
|Refactor|코드 리팩토링|
|Build|빌드 파일 수정|
|CI|CI 설정 파일 수정|
|Perf|성능 개선|
|Chore|자잘한 수정이나 빌드 업데이트|
|Rename|파일 혹은 폴더명을 수정만 한 경우|
|Remove|파일을 삭제만 한 경우|

#### 첫 단어로 이용하기 좋은 영어 단어들

제목을 명령조로 작성하기 위해 아래 단어들을 첫 단어로 이용하여 작성하면 좋다.
|영어 단어|사용 용도|
|:--:|:--|
|Fix|보통 올바르지 않은 동작을 고친 경우 사용|
|Add|코드나 테스트, 예제, 문서 등의 추가가 있을 때 사용<br />추가하는 행위는 대부분 목표나 목적이 명시되기 때문에 이 패턴은 자주 사용되지 않는다.|
|Remove<br />Clean<br />Eliminate|코드의 삭제가 있을 때 사용<br />보통 삭제한 대상 앞에 ‘unnecessary’, ‘useless’, ‘unneeded’, ‘unused’, ‘duplicated’가 붙는 경우가 많다.|
|Use|특별히 무언가를 사용해 구현을 하는 경우<br />‘사용하였음’을 이야기 할 때는 대체적으로 목적이 필요하기 때문에 이 용법은 자주 사용되지 않는다.|
|Refactor|전면 수정이 있을 때 사용|
|Simplify|복잡한 코드를 단순화 할 때 사용<br />Refactor의 성격이 강하나 이보다는 약한 수정의 경우 이용하면 좋다.|
|Update|개정이나 버전 업데이트가 있을 때 사용<br />Fix와는 달리 Update는 잘못된 것을 바로잡는 것이 아니다.<br />원래도 정상적으로 동작하고 있었지만, 수정, 추가, 보완을 한다는 개념이다.<br />코드보다는 주로 문서나 리소스, 라이브러리등에 사용한다.|
|Improve|호환성, 테스트 커버리지, 성능, 검증 기능, 접근성 등의 향상이 있을 때 사용|
|Make|주로 기존 동작의 변경을 명시|
|Implement|코드가 추가된 정도보다 더 주목할 만한 구현체를 완성시켰을 때 사용<br />‘Add’에 비해 더 큰 단위의 코드 추가에 사용된다.<br />특히 모듈이나 클래스 등의 단위에 사용되기 때문에 특별히 목적을 부여 해주지 않아도 되는 경우가 많다.<br />구현 목적을 설명할 필요가 있을 때에는 ‘to’를 사용한다.|
|Revise|Update와 비슷하나 문서의 개정이 있을 때 주로 사용|
|Correct|주로 문법의 오류나 타입의 변경, 이름 변경 등에 사용|
|Ensure<br />Make sure|무엇이 확실하게 보장받는다는 것을 명시<br />if 구문처럼 조건을 확실하게 주었을 때에도 사용 될 수 있다.|
|Prevent|특정한 조건이나 처리, 오류를 막은 경우|
|Avoid|특정한 조건이나 처리, 오류를 회피한 경우<br />if 구문으로 특정한 동작을 제외시키는 경우에도 사용 할 수 있다.|
|Move|코드의 이동이 있을 때 사용|
|Rename|이름 변경이 있을 때 사용|
|Allow|Make와 비슷하지만, 허용을 표현할 때 사용|
|Verify|검증 코드를 넣을 때 주로 사용|
|Set|변수 값을 변경하는 등의 작은 수정에 주로 사용|
|Pass|파라메터를 넘기는 처리에 주로 사용|

#### Github가 이슈 종료로 인식하는 키워드

Github가 이슈 종료로 인식하는 키워드를 아래와 같이 분류하기도 한다.

|분류|설명 및 키워드|
|--|--|
|close 계열|일반 개발 이슈<br />close, closes, closed|
|fix 계열|버그 픽스나 핫 픽스 이슈<br />fix, fixes, fixed|
|resolve 계열|문의나 요청 사항에 대응한 이슈<br />resolve, resolves, resolved|

하지만 기능 차이가 없기 때문에 문법이나 맥락에 맞게 사용하면 된다.

### [적절한 commit 단위](https://tech.10000lab.xyz/git/git-commit-discipline.html)

대규모 프로젝트의 commit 로그를 둘러보며, "**의미있는 최소 단위로 commit하는 것이 좋다**"는 말이 와닿았다. 대부분의 commit의 덩어리가 작았기 때문이다. "Docs: fix typo in README.md"와 같이 정말 오타만 수정된 commit도 있었다.

#### commit시 지켜야할 사항

1. 반드시 테스트를 통과한 후 해야한다.
2. 의미있는 최소 단위로 한다.
3. 너무 작은 단위로 커밋을 하지 않아도 되는 경우도 있다.

   완전히 새로운 기능 개발과 같은 경우

### '왜'를 표현하는 commit 작성법

큰 덩어리의 commit이라면 더더욱 '무엇을', '왜'에 해당하는 내용을 본문에 작성해 주는 것이 좋다.

```text
### What?

### Why?
```

## 마치며

블로그 글 작성을 핑계삼아 처음으로 작정하고 대규모 프로젝트의 commit 메세지를 자세히 살펴보았다.
git commit 메세지를 다루는 좋은 글들이 많지만, 직접 확인하고 적용해보는 시간을 가졌을 때 내 지식이 되는 부분이 크다는 것을 다시 한번 깨달았다. 앞으로는 오픈소스를 볼 때 코드 뿐만 아니라 commit 메세지도 한 번씩 더 보며 좋은 점은 배워야겠다.

**※ 이 글에 문제되는 부분이 보인다면, 번거롭겠지만 메일(laniiiiworld@gmail.com)로 연락 부탁드립니다.**

**불편을 줄이기 위해 댓글 기능도 빠르게 만들어 보겠습니다.**

**감사합니다!**

## References

- [좋은 git 커밋 메시지를 작성하기 위한 7가지 약속](https://meetup.nhncloud.com/posts/106)
- [좋은 git commit 메시지를 위한 영어 사전](https://blog.ull.im/engineering/2019/03/10/logs-on-git.html)
- [깃(Git) 커밋 가이드](https://tech.10000lab.xyz/git/git-commit-discipline.html)
- [느낌 있는 Commit Message 작성하기](https://nohack.tistory.com/17)
